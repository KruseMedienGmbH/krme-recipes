{
    "manifests": {
        "krme/shopware-platform-tools": {
            "manifest": {
                "copy-from-recipe": {
                    "root/": "",
                    "tests/": "tests/",
                    "docker/": "docker/"
                },
                "post-install-output": [
                    ""
                ]
            },
            "files": {
                "docker/boot_end.sh": {
                    "contents": [
                        "#!/bin/bash",
                        "",
                        "vendor/bin/platform-tools misc:install_dev_tools"
                    ],
                    "executable": true
                },
                "docker/boot_start.sh": {
                    "contents": [
                        "#!/bin/bash"
                    ],
                    "executable": true
                },
                "root/.dockerignore": {
                    "contents": [
                        "node_modules",
                        "vendor",
                        "**/vendor",
                        "**/node_modules",
                        "**/var/cache",
                        "**/var/log",
                        "**/imports"
                    ],
                    "executable": false
                },
                "root/.gitattributes": {
                    "contents": [
                        "# Reference: https://git-scm.com/docs/gitattributes",
                        "",
                        "# Set the default behavior, in case people don't have core.autocrlf set",
                        "* text=auto",
                        "",
                        "# Force the following filetypes to have unix eols, so Windows does not break them",
                        "*.* text eol=lf",
                        "",
                        "# Windows forced line-endings",
                        "/.idea/* text eol=crlf",
                        "",
                        "# (binary is a macro for -text -diff)",
                        "*.png binary",
                        "*.jpg binary",
                        "*.jpeg binary",
                        "*.gif binary",
                        "*.ico binary",
                        "*.mov binary",
                        "*.mp4 binary",
                        "*.mp3 binary",
                        "*.gz binary",
                        "*.zip binary",
                        "*.7z binary",
                        "*.ttf binary",
                        "*.eot binary",
                        "*.woff binary",
                        "*.woff2 binary",
                        "*.pdf binary",
                        "*.bz2 binary",
                        "",
                        "# Set export ignored files and directories",
                        ".editorconfig export-ignore",
                        ".gitattributes export-ignore",
                        ".gitignore export-ignore"
                    ],
                    "executable": false
                },
                "root/.ludtwig-ignore": {
                    "contents": [
                        "custom/static-plugins/**/src/Resources/views/email",
                        "custom/static-plugins/**/src/Resources/views/documents",
                        "custom/static-plugins/**/vendor/"
                    ],
                    "executable": false
                },
                "root/.php-cs-fixer.dist.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "use PhpCsFixer\\Config;",
                        "use PhpCsFixer\\Finder;",
                        "use PhpCsFixer\\Runner\\Parallel\\ParallelConfigFactory;",
                        "use Symfony\\Component\\Filesystem\\Path;",
                        "",
                        "return (new Config())",
                        "    ->setParallelConfig(ParallelConfigFactory::detect())",
                        "    ->setRiskyAllowed(true)",
                        "    ->setRules([",
                        "        '@Symfony' => true,",
                        "        '@Symfony:risky' => true,",
                        "",
                        "        'blank_line_after_opening_tag' => false,",
                        "        'class_attributes_separation' => ['elements' => ['property' => 'one', 'method' => 'one']],",
                        "        'concat_space' => ['spacing' => 'one'],",
                        "        'declare_strict_types' => true,",
                        "        'fopen_flags' => false,",
                        "        'general_phpdoc_annotation_remove' => ['annotations' => ['copyright', 'category']],",
                        "        'linebreak_after_opening_tag' => false,",
                        "        'method_argument_space' => ['on_multiline' => 'ensure_fully_multiline'],",
                        "        'native_function_invocation' => [",
                        "            'scope' => 'namespaced',",
                        "            'strict' => false,",
                        "            'exclude' => ['ini_get'],",
                        "        ],",
                        "        'no_superfluous_phpdoc_tags' => ['allow_unused_params' => true, 'allow_mixed' => true],",
                        "        'no_useless_else' => true,",
                        "        'no_useless_return' => true,",
                        "        'ordered_class_elements' => true,",
                        "        'phpdoc_align' => ['align' => 'left'],",
                        "        'phpdoc_annotation_without_dot' => false,",
                        "        'phpdoc_line_span' => true,",
                        "        'phpdoc_order' => ['order' => ['param', 'throws', 'return']],",
                        "        'phpdoc_summary' => false,",
                        "        'phpdoc_to_comment' => false,",
                        "        'php_unit_dedicate_assert' => ['target' => 'newest'],",
                        "        'php_unit_dedicate_assert_internal_type' => true,",
                        "        'php_unit_mock' => true,",
                        "        'php_unit_test_case_static_method_calls' => ['methods' => [",
                        "            'any' => 'this',",
                        "            'never' => 'this',",
                        "            'atLeast' => 'this',",
                        "            'atLeastOnce' => 'this',",
                        "            'once' => 'this',",
                        "            'exactly' => 'this',",
                        "            'atMost' => 'this',",
                        "        ]],",
                        "        'self_accessor' => false,",
                        "        'single_line_throw' => false,",
                        "        'single_quote' => ['strings_containing_single_quote_chars' => true],",
                        "        'strict_comparison' => true,",
                        "        'strict_param' => true,",
                        "        'trailing_comma_in_multiline' => ['after_heredoc' => true, 'elements' => ['array_destructuring', 'arrays', 'match']],",
                        "        'void_return' => true,",
                        "        'yoda_style' => [",
                        "            'equal' => false,",
                        "            'identical' => false,",
                        "            'less_and_greater' => false,",
                        "        ],",
                        "    ])",
                        "    ->setUsingCache(true)",
                        "    ->setCacheFile(Path::join($_SERVER['SHOPWARE_TOOL_CACHE_ECS'] ?? 'var/cache/cs_fixer', 'cs_fixer.cache'))",
                        "    ->setFinder(",
                        "        (new Finder())",
                        "            ->in([",
                        "                __DIR__ . '/custom',",
                        "            ])",
                        "            ->exclude(['node_modules', '*/vendor/*', '*/tests/*'])",
                        "    );"
                    ],
                    "executable": false
                },
                "root/.shopware-project.yml": {
                    "contents": [
                        "build:",
                        "  keep_extension_source: true",
                        "  disable_asset_copy: false",
                        "  remove_extension_assets: false",
                        "  cleanup_paths:",
                        "    - var/cache",
                        "    - var/log",
                        "deployment:",
                        "  extension-management:",
                        "    enabled: true",
                        "",
                        "    exclude:",
                        "      - 'FroshDevelopmentHelper'",
                        "",
                        "  hooks:",
                        "    pre-update: |",
                        "      ../../current/bin/dump.sh",
                        "  store:",
                        "    license-domain: '##DOMAIN##'",
                        "",
                        "",
                        "validation:",
                        "  ignore:",
                        "    - identifier: 'phpstan/shopware.forbidLocalDiskWrite'",
                        "    - identifier: 'phpstan/shopware.internalMethodCall'"
                    ],
                    "executable": false
                },
                "root/Dockerfile": {
                    "contents": [
                        "FROM dockware/shopware-essentials:latest AS dockware",
                        "",
                        "USER dockware",
                        "",
                        "COPY --chown=33:33 . /var/www/html",
                        "",
                        "RUN echo \"DOCKWARE: decompressing NVM...\" && \\",
                        "    sudo zstd -d /var/www/nvm.tar.zst -o /var/www/nvm.tar && \\",
                        "    sudo tar -xf /var/www/nvm.tar -C /var/www/.nvm && \\",
                        "    sudo rm /var/www/nvm.tar.zst /var/www/nvm.tar && \\",
                        "    sudo chown 33:33 /var/www/.nvm -R && \\",
                        "    echo \"DOCKWARE: NVM decompression completed successfully\"",
                        "",
                        "RUN composer install --no-scripts",
                        "",
                        "RUN sudo service mysql start && \\",
                        "    sudo composer self-update && \\",
                        "    SHOPWARE_DEPLOYMENT_TIMEOUT=900 INSTALL_LOCALE=de-DE SHOPWARE_USAGE_DATA_CONSENT=revoked vendor/bin/shopware-deployment-helper run --skip-assets-install --skip-theme-compile && \\",
                        "    MYSQL_PWD=root mysql -h 127.0.0.1 -u root shopware -e \"SET FOREIGN_KEY_CHECKS=0;SET autocommit=0;SET UNIQUE_CHECKS=0;\" && \\",
                        "    MYSQL_PWD=root mysql -h 127.0.0.1 -u root shopware --default-character-set=utf8mb4 --force < bin/localhost.sql && \\",
                        "    MYSQL_PWD=root mysql -h 127.0.0.1 -u root shopware -e \"COMMIT;SET FOREIGN_KEY_CHECKS=1;SET autocommit=1;SET UNIQUE_CHECKS=1;\" && \\",
                        "    chmod +x bin/* && \\",
                        "    touch install.lock && \\",
                        "    bin/console sales-channel:update:domain localhost && \\",
                        "    MYSQL_PWD=root mysql -h 127.0.0.1 -u root shopware -e \"UPDATE sales_channel_domain SET url = REPLACE(url, 'https', 'http') WHERE url LIKE 'https:%'\" && \\",
                        "    bin/console theme:dump -n && \\",
                        "    vendor/bin/platform-tools misc:update_shopware_cli && \\",
                        "    shopware-cli project admin-build && \\",
                        "    bin/build-storefront.sh && \\",
                        "    shopware-cli project storefront-build && \\",
                        "    rm bin/localhost.sql && \\",
                        "    vendor/bin/shopware-deployment-helper run && \\",
                        "    service mysql stop",
                        "",
                        "# Clean Up",
                        "RUN sudo killall mysqld || true && \\",
                        "    sudo rm -f \"/var/run/mysqld/mysqld.sock.lock\" && \\",
                        "    sudo chown -R mysql:mysql /var/lib/mysql /var/run/mysqld && \\",
                        "    sudo apt-get update -y && \\",
                        "    sudo apt-get upgrade -y && \\",
                        "    rm -rf /var/www/.nvm/.cache/* && \\",
                        "    sudo apt autoremove --purge -y && \\",
                        "    rm -rf /var/log/*.gz /var/log/*.[0-9] && \\",
                        "    sudo truncate -s 0 /var/log/*.log && \\",
                        "    sudo apt-get clean && \\",
                        "    sudo apt-get autoremove --purge -y && \\",
                        "    rm -rf .git && \\",
                        "    sudo rm -rf /var/cache/* && \\",
                        "    find /var/www/html -type d -name 'node_modules' -exec rm -rf {} + && \\",
                        "    find /var/www/html/custom -type d -name 'vendor' -exec rm -rf {} + && \\",
                        "    sudo rm -rf /var/www/.cache/* && \\",
                        "    sudo rm -rf /var/www/.npm/* && \\",
                        "    rm -rf /var/www/html/var/log/* && \\",
                        "    rm -rf /var/www/html/var/cache/* && \\",
                        "    sudo rm -rf /dockware/tmp && \\",
                        "    sudo rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*",
                        "",
                        "RUN tar -cf - -C /var/www/html . | zstd --ultra -22 -o /var/www/shopware.tar.zst && \\",
                        "    find /var/www/html -mindepth 1 -delete && \\",
                        "    # we need the zst in the html folder. if existing entrypoint.sh will decompress it \\",
                        "    # it has to be in html, because users might mount that folder, and if its not inside, it would \\",
                        "    # always exist and therefore always overwrite the users custom-mount html folder \\",
                        "    mv /var/www/shopware.tar.zst /var/www/html/shopware.tar.zst && \\",
                        "    echo \". /etc/profile\" >> /var/www/.bashrc",
                        "",
                        "FROM ubuntu:24.04",
                        "",
                        "COPY --from=dockware / /",
                        "",
                        "USER dockware",
                        "",
                        "# make the apache folder the working directory",
                        "WORKDIR /var/www/html",
                        "",
                        "ENTRYPOINT [\"/bin/bash\", \"/entrypoint.sh\"]"
                    ],
                    "executable": false
                },
                "root/bitbucket-pipelines.yml": {
                    "contents": [
                        "image:",
                        "  name: shopware/shopware-cli:latest-php-8.3",
                        "",
                        "pipelines:",
                        "  custom:",
                        "    manual-renovate:",
                        "      import: shopwareplatformtools:main:manual-renovate",
                        "    manual-system-check:",
                        "      import: shopwareplatformtools:main:manual-system-check",
                        "    full-build-check:",
                        "      import: shopwareplatformtools:main:full-build-check",
                        "    dependency-check:",
                        "      import: shopwareplatformtools:main:dependency-check",
                        "  branches:",
                        "    develop:",
                        "      import: shopwareplatformtools:main:deploy-staging",
                        "    main:",
                        "      import: shopwareplatformtools:main:deploy-production",
                        "    updates/shopware-updates:",
                        "      import: shopwareplatformtools:main:updates/shopware-updates",
                        "  pull-requests:",
                        "    '**':",
                        "      import: shopwareplatformtools:main:pull-request"
                    ],
                    "executable": false
                },
                "root/deploy.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "",
                        "namespace Deployer;",
                        "",
                        "require_once 'vendor/krme/shopware-platform-tools/recipe/shopware.php';",
                        "",
                        "// Hosts",
                        "host('Integration')",
                        "    ->set('labels', [",
                        "        'stage' => 'integ',",
                        "        'env' => 'prod',",
                        "    ])",
                        "    ->set('hostname', '')",
                        "    ->set('domain', '')",
                        "    ->set('remote_user', '')",
                        "    ->set('http_user', '')",
                        "    ->set('http_group', '')",
                        "    ->set('deploy_path', '');",
                        "",
                        "host('Production')",
                        "    ->set('labels', [",
                        "        'stage' => 'prod',",
                        "        'env' => 'prod',",
                        "    ])",
                        "    ->set('hostname', '')",
                        "    ->set('domain', '')",
                        "    ->set('remote_user', '')",
                        "    ->set('http_user', '')",
                        "    ->set('http_group', '')",
                        "    ->set('deploy_path', '');",
                        ""
                    ],
                    "executable": false
                },
                "root/infection.json5": {
                    "contents": [
                        "{",
                        "    \"source\": {",
                        "        \"directories\": [",
                        "            \"src\"",
                        "        ],",
                        "        \"excludes\": [",
                        "            \"tests\",",
                        "        ]",
                        "    },",
                        "    \"timeout\": 60,",
                        "    \"logs\": {",
                        "        \"text\": \"infection.log\",",
                        "        \"html\": \"infection.html\",",
                        "        \"summary\": \"summary.log\",",
                        "        \"json\": \"infection-log.json\",",
                        "        \"perMutator\": \"per-mutator.md\",",
                        "        \"summaryJson\": \"summary.json\"",
                        "    },",
                        "    \"tmpDir\": \"./var/tmp-folder\",",
                        "    \"phpUnit\": {",
                        "        \"configDir\": \"./\",",
                        "        \"customPath\": \"./vendor/bin/phpunit\"",
                        "    },",
                        "    \"mutators\": {",
                        "        \"global-ignore\": [",
                        "            \"FooClass::__construct\"",
                        "        ],",
                        "        \"global-ignoreSourceCodeByRegex\": [",
                        "            \"Assert::.*\"",
                        "        ],",
                        "        \"@default\": true,",
                        "        \"@function_signature\": false,",
                        "        \"TrueValue\": {",
                        "            \"ignore\": [",
                        "                \"NameSpace\\\\*\\\\Class::method\"",
                        "            ],",
                        "            \"ignoreSourceCodeByRegex\": [",
                        "                \"\\\\$this->logger.*\"",
                        "            ]",
                        "        }",
                        "    },",
                        "    \"testFramework\":\"phpunit\",",
                        "    \"bootstrap\":\"./tests/TestBootstrap.php\"",
                        "}"
                    ],
                    "executable": false
                },
                "root/phpstan.neon": {
                    "contents": [
                        "parameters:",
                        "    phpVersion: 80300",
                        "    level: 8",
                        "    tmpDir: var/cache/phpstan",
                        "    inferPrivatePropertyTypeFromConstructor: true",
                        "    treatPhpDocTypesAsCertain: false",
                        "",
                        "    bootstrapFiles:",
                        "        - vendor/shopware/core/DevOps/StaticAnalyze/phpstan-bootstrap.php",
                        "",
                        "    symfony:",
                        "        constantHassers: false",
                        "        containerXmlPath: 'var/cache/static_phpstan_dev/Shopware_Core_DevOps_StaticAnalyze_StaticAnalyzeKernelPhpstan_devDebugContainer.xml'",
                        "        consoleApplicationLoader: vendor/shopware/core/DevOps/StaticAnalyze/console-application.php",
                        ""
                    ],
                    "executable": false
                },
                "root/phpunit.xml.dist": {
                    "contents": [
                        "<?xml version=\"1.0\" encoding=\"UTF-8\"?>",
                        "<phpunit xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"",
                        "         xsi:noNamespaceSchemaLocation=\"https://schema.phpunit.de/10.4/phpunit.xsd\"",
                        "         bootstrap=\"tests/TestBootstrap.php\"",
                        "         executionOrder=\"random\"",
                        "         cacheDirectory=\".phpunit.cache\">",
                        "    <php>",
                        "        <ini name=\"error_reporting\" value=\"-1\"/>",
                        "        <env name=\"APP_ENV\" value=\"test\"/>",
                        "        <env name=\"TEST_TOKEN\" value=\"none\"/>",
                        "        <env name=\"APP_DEBUG\" value=\"1\"/>",
                        "        <env name=\"APP_SECRET\" value=\"s$cretf0rt3st\"/>",
                        "        <env name=\"SYMFONY_DEPRECATIONS_HELPER\" value=\"weak\"/>",
                        "        <server name=\"KERNEL_CLASS\" value=\"Shopware\\Core\\Kernel\"/>",
                        "    </php>",
                        "    <testsuites>",
                        "        <testsuite name=\"Krme Shopware 6 Plugin\">",
                        "            <directory>tests</directory>",
                        "        </testsuite>",
                        "    </testsuites>",
                        "    <coverage/>",
                        "    <source>",
                        "        <include>",
                        "            <directory suffix=\".php\">./src</directory>",
                        "        </include>",
                        "        <exclude>",
                        "            <directory suffix=\".php\">./bin</directory>",
                        "            <directory suffix=\".php\">./tests</directory>",
                        "            <directory suffix=\".php\">./vendor</directory>",
                        "            <directory suffix=\".php\">./var</directory>",
                        "            <file>ecs.php</file>",
                        "            <file>rector.php</file>",
                        "            <file>vendor-builder.php</file>",
                        "        </exclude>",
                        "    </source>",
                        "</phpunit>",
                        ""
                    ],
                    "executable": false
                },
                "root/rector.php": {
                    "contents": [
                        "<?php",
                        "",
                        "// rector.php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "/*",
                        " * (c) KruseMedien GmbH <info@krusemedien.com>",
                        " * For the full copyright and license information, please view the LICENSE",
                        " * file that was distributed with this source code.",
                        " */",
                        "",
                        "use Frosh\\Rector\\Rule\\ClassConstructor\\RemoveArgumentFromClassConstructRector;",
                        "use Frosh\\Rector\\Rule\\ClassMethod\\AddArgumentToClassWithoutDefaultRector;",
                        "use Rector\\CodingStyle\\Rector\\String_\\SymplifyQuoteEscapeRector;",
                        "use Rector\\Config\\RectorConfig;",
                        "use Rector\\DeadCode\\Rector\\Cast\\RecastingRemovalRector;",
                        "use Rector\\DeadCode\\Rector\\ClassMethod\\RemoveUnusedPrivateMethodRector;",
                        "use Rector\\DeadCode\\Rector\\StaticCall\\RemoveParentCallWithoutParentRector;",
                        "use Rector\\Naming\\Rector\\Class_\\RenamePropertyToMatchTypeRector;",
                        "use Rector\\Privatization\\Rector\\ClassMethod\\PrivatizeFinalClassMethodRector;",
                        "use Rector\\Privatization\\Rector\\Property\\PrivatizeFinalClassPropertyRector;",
                        "use Rector\\ValueObject\\PhpVersion;",
                        "use Frosh\\Rector\\Set\\ShopwareSetList;",
                        "",
                        "return RectorConfig::configure()",
                        "    ->withPreparedSets(",
                        "        deadCode: true,",
                        "        codeQuality: true,",
                        "        codingStyle: true,",
                        "        typeDeclarations: true,",
                        "        privatization: true,",
                        "        naming: true,",
                        "        instanceOf: true,",
                        "        strictBooleans: true,",
                        "        symfonyCodeQuality: true",
                        "    )",
                        "    ->withSymfonyContainerXml(__DIR__ . '/var/cache/static_phpstan_dev/Shopware_Core_DevOps_StaticAnalyze_StaticAnalyzeKernelPhpstan_devDebugContainer.xml')",
                        "    ->withSkip(",
                        "        []",
                        "    )",
                        "    ->withPaths([",
                        "        __DIR__ . '/custom',",
                        "    ])",
                        "    ->withBootstrapFiles([",
                        "        __DIR__ . '/vendor/shopware/core/DevOps/StaticAnalyze/phpstan-bootstrap.php',",
                        "    ])",
                        "    ->withPhpVersion(PhpVersion::PHP_83)",
                        "    ->withAutoloadPaths([",
                        "        __DIR__ . '/vendor/store.shopware.com',",
                        "    ])",
                        "    ->withPhpSets(",
                        "        php83: true",
                        "    )",
                        "    ->withSets([",
                        "        ShopwareSetList::SHOPWARE_6_7_0,",
                        "        ShopwareSetList::SHOPWARE_6_6_0,",
                        "        ShopwareSetList::SHOPWARE_6_5_0,",
                        "    ])",
                        "    ->withSkip(",
                        "        [",
                        "            RenamePropertyToMatchTypeRector::class,",
                        "            RemoveArgumentFromClassConstructRector::class,",
                        "            AddArgumentToClassWithoutDefaultRector::class,",
                        "            PrivatizeFinalClassPropertyRector::class,",
                        "            RemoveArgumentFromClassConstructRector::class,",
                        "            AddArgumentToClassWithoutDefaultRector::class,",
                        "            RenamePropertyToMatchTypeRector::class,",
                        "            RecastingRemovalRector::class,",
                        "        ]",
                        "    )",
                        "    ->withParallel();",
                        ""
                    ],
                    "executable": false
                },
                "root/rulesets.xml": {
                    "contents": [
                        "<?xml version=\"1.0\"?>",
                        "<ruleset name=\"PHPMD ruleset\"",
                        "         xmlns=\"http://pmd.sf.net/ruleset/1.0.0\"",
                        "         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"",
                        "         xsi:schemaLocation=\"http://pmd.sf.net/ruleset/1.0.0",
                        "                       http://pmd.sf.net/ruleset_xml_schema.xsd\"",
                        "         xsi:noNamespaceSchemaLocation=\"",
                        "                       http://pmd.sf.net/ruleset_xml_schema.xsd\">",
                        "    <description>",
                        "       PHPMD ruleset",
                        "    </description>",
                        "    <rule ref=\"rulesets/codesize.xml\" />",
                        "    <rule ref=\"rulesets/design.xml\" />",
                        "</ruleset>"
                    ],
                    "executable": false
                },
                "tests/TestBootstrap.php": {
                    "contents": [
                        "<?php declare(strict_types=1);",
                        "",
                        "require __DIR__ . '/../vendor/shopware/core/TestBootstrapper.php';",
                        "require __DIR__ . '/../vendor/shopware/core/Framework/Adapter/Kernel/KernelFactory.php';",
                        "",
                        "use Shopware\\Core\\Framework\\Adapter\\Kernel\\KernelFactory;",
                        "use Shopware\\Core\\TestBootstrapper;",
                        "",
                        "$loader = (new TestBootstrapper())",
                        "    ->setDatabaseUrl('mysql://root:root@127.0.0.1:3306/shopware')",
                        "    ->setLoadEnvFile(true)",
                        "    ->setPlatformEmbedded(false)",
                        "    ->bootstrap()",
                        "    ->getClassLoader();",
                        "",
                        "//$loader->addPsr4('Plugin\\\\Tests\\\\', __DIR__ . '/../custom/static-plugins/Plugin/tests');",
                        "",
                        "return $loader;"
                    ],
                    "executable": false
                }
            },
            "ref": "fc0393e02220d931b9cfee46a8b533d6d99d2a7d"
        }
    }
}
